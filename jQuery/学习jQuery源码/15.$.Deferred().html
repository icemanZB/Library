<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<title>$.Deferred()</title>
	<script src="../js/jquery-2.0.3.min.js"></script>
	<script>
		$(function () {

			var cb = $.Callbacks("memory");

			cb.add(function () {
				alert(1);
			});

			cb.fire();

			$("input").click(function () {
				// add 源码内部也调用了 fire() 方法
				cb.add(function () {
					alert(2);
				});

			});


			var dfd = $.Deferred();

			setTimeout(function () {

				alert(111);
				dfd.resolve();

			}, 1000);

			dfd.done(function () {
				alert("aaa"); // 等 1000 后 触发
			});

			$("input").click(function () {
				// 这里会立即触发 bbb
				dfd.done(function () {
					alert("bbb");
				});

			});


		});
	</script>
</head>
<body>
<input type="button" value="点击">
</body>
</html>